[build]
  command   = "npm install && node node_modules/vite/bin/vite.js build"
  publish   = "dist"
  functions = "netlify/functions"

[build.environment]
  NODE_VERSION = "18"

[functions]
  node_bundler = "esbuild"

[functions."claude-proxy"]
  timeout = 60   # web_search tool calls take 15-45s; default 10s kills them

[functions."market-proxy"]
  timeout = 20

[functions."yields-proxy"]
  timeout = 20

[functions."cb-rates-proxy"]
  timeout = 20

[functions."calendar-proxy"]
  timeout = 20

[functions."news-proxy"]
  timeout = 26

[[redirects]]
  from = "/api/claude"
  to   = "/.netlify/functions/claude-proxy"
  status = 200

[[redirects]]
  from = "/api/markets"
  to   = "/.netlify/functions/market-proxy"
  status = 200

[[redirects]]
  from = "/api/yields"
  to   = "/.netlify/functions/yields-proxy"
  status = 200

[[redirects]]
  from = "/api/cb-rates"
  to   = "/.netlify/functions/cb-rates-proxy"
  status = 200

[[redirects]]
  from = "/api/calendar"
  to   = "/.netlify/functions/calendar-proxy"
  status = 200

[[redirects]]
  from = "/api/news"
  to   = "/.netlify/functions/news-proxy"
  status = 200

[[redirects]]
  from = "/*"
  to   = "/index.html"
  status = 200
